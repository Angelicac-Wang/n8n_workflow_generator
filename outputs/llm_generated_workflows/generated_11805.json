{
  "template_id": "11805",
  "llm_response": {
    "mode": "create_workflow",
    "workflowPlan": {
      "name": "Shopify Abandoned Cart Recovery",
      "nodes": [
        {
          "id": "1",
          "label": "Abandoned Cart Webhook",
          "nodeType": "n8n-nodes-base.webhook",
          "typeVersion": 1,
          "params": {
            "path": "abandoned-cart",
            "method": "POST"
          },
          "position": {
            "x": 200,
            "y": 300
          }
        },
        {
          "id": "2",
          "label": "Normalize Cart Data",
          "nodeType": "n8n-nodes-base.function",
          "typeVersion": 1,
          "params": {
            "functionCode": "return items.map(item => { /* normalization logic */ return item; });"
          },
          "position": {
            "x": 400,
            "y": 300
          }
        },
        {
          "id": "3",
          "label": "Fetch Cart Details",
          "nodeType": "n8n-nodes-base.httpRequest",
          "typeVersion": 1,
          "params": {
            "url": "https://api.shopify.com/v1/carts/{{$json[\"cart_id\"]}}",
            "method": "GET",
            "authentication": "shopifyApi"
          },
          "position": {
            "x": 600,
            "y": 300
          }
        },
        {
          "id": "4",
          "label": "Fetch Customer History",
          "nodeType": "n8n-nodes-base.httpRequest",
          "typeVersion": 1,
          "params": {
            "url": "https://api.shopify.com/v1/customers/{{$json[\"customer_id\"]}}",
            "method": "GET",
            "authentication": "shopifyApi"
          },
          "position": {
            "x": 800,
            "y": 300
          }
        },
        {
          "id": "5",
          "label": "Predict Abandonment Reason",
          "nodeType": "n8n-nodes-base.function",
          "typeVersion": 1,
          "params": {
            "functionCode": "return items.map(item => { /* prediction logic */ return item; });"
          },
          "position": {
            "x": 1000,
            "y": 300
          }
        },
        {
          "id": "6",
          "label": "Personalization Engine",
          "nodeType": "n8n-nodes-base.function",
          "typeVersion": 1,
          "params": {
            "functionCode": "return items.map(item => { /* personalization logic */ return item; });"
          },
          "position": {
            "x": 1200,
            "y": 300
          }
        },
        {
          "id": "7",
          "label": "Wait 1 Hour",
          "nodeType": "n8n-nodes-base.wait",
          "typeVersion": 1,
          "params": {
            "waitFor": "1h"
          },
          "position": {
            "x": 1400,
            "y": 300
          }
        },
        {
          "id": "8",
          "label": "Check Order Status",
          "nodeType": "n8n-nodes-base.httpRequest",
          "typeVersion": 1,
          "params": {
            "url": "https://api.shopify.com/v1/orders/{{$json[\"order_id\"]}}",
            "method": "GET",
            "authentication": "shopifyApi"
          },
          "position": {
            "x": 1600,
            "y": 300
          }
        },
        {
          "id": "9",
          "label": "Send Email #1",
          "nodeType": "n8n-nodes-base.sendEmail",
          "typeVersion": 1,
          "params": {
            "fromEmail": "your-email@example.com",
            "toEmail": "{{$json[\"customer_email\"]}}",
            "subject": "We Miss You!",
            "text": "Come back and complete your purchase with a special discount!"
          },
          "position": {
            "x": 1800,
            "y": 300
          }
        },
        {
          "id": "10",
          "label": "Log Touchpoint (Email)",
          "nodeType": "n8n-nodes-base.googleSheets",
          "typeVersion": 1,
          "params": {
            "operation": "append",
            "sheetId": "your-google-sheet-id",
            "range": "Touchpoints!A:F",
            "data": [
              [
                "{{$json[\"cart_id\"]}}",
                "{{$json[\"customer_id\"]}}",
                "Email #1",
                "{{$now}}",
                "Email",
                "{{$json[\"ab_group\"]}}"
              ]
            ]
          },
          "position": {
            "x": 2000,
            "y": 300
          }
        },
        {
          "id": "11",
          "label": "Wait 4 Hours",
          "nodeType": "n8n-nodes-base.wait",
          "typeVersion": 1,
          "params": {
            "waitFor": "4h"
          },
          "position": {
            "x": 2200,
            "y": 300
          }
        },
        {
          "id": "12",
          "label": "Send SMS",
          "nodeType": "n8n-nodes-base.twilio",
          "typeVersion": 1,
          "params": {
            "from": "your-twilio-number",
            "to": "{{$json[\"customer_phone\"]}}",
            "message": "Complete your purchase and enjoy a discount!"
          },
          "position": {
            "x": 2400,
            "y": 300
          }
        },
        {
          "id": "13",
          "label": "Log Touchpoint (SMS)",
          "nodeType": "n8n-nodes-base.googleSheets",
          "typeVersion": 1,
          "params": {
            "operation": "append",
            "sheetId": "your-google-sheet-id",
            "range": "Touchpoints!A:F",
            "data": [
              [
                "{{$json[\"cart_id\"]}}",
                "{{$json[\"customer_id\"]}}",
                "SMS",
                "{{$now}}",
                "SMS",
                "{{$json[\"ab_group\"]}}"
              ]
            ]
          },
          "position": {
            "x": 2600,
            "y": 300
          }
        },
        {
          "id": "14",
          "label": "Wait 24 Hours",
          "nodeType": "n8n-nodes-base.wait",
          "typeVersion": 1,
          "params": {
            "waitFor": "24h"
          },
          "position": {
            "x": 2800,
            "y": 300
          }
        },
        {
          "id": "15",
          "label": "Send Email #2",
          "nodeType": "n8n-nodes-base.sendEmail",
          "typeVersion": 1,
          "params": {
            "fromEmail": "your-email@example.com",
            "toEmail": "{{$json[\"customer_email\"]}}",
            "subject": "Last Chance!",
            "text": "Hurry up! Your cart is waiting with a special offer!"
          },
          "position": {
            "x": 3000,
            "y": 300
          }
        },
        {
          "id": "16",
          "label": "Log Touchpoint (Email #2)",
          "nodeType": "n8n-nodes-base.googleSheets",
          "typeVersion": 1,
          "params": {
            "operation": "append",
            "sheetId": "your-google-sheet-id",
            "range": "Touchpoints!A:F",
            "data": [
              [
                "{{$json[\"cart_id\"]}}",
                "{{$json[\"customer_id\"]}}",
                "Email #2",
                "{{$now}}",
                "Email",
                "{{$json[\"ab_group\"]}}"
              ]
            ]
          },
          "position": {
            "x": 3200,
            "y": 300
          }
        },
        {
          "id": "17",
          "label": "Wait 48 Hours",
          "nodeType": "n8n-nodes-base.wait",
          "typeVersion": 1,
          "params": {
            "waitFor": "48h"
          },
          "position": {
            "x": 3400,
            "y": 300
          }
        },
        {
          "id": "18",
          "label": "Send WhatsApp",
          "nodeType": "n8n-nodes-base.whatsapp",
          "typeVersion": 1,
          "params": {
            "from": "your-whatsapp-number",
            "to": "{{$json[\"customer_phone\"]}}",
            "message": "Don't miss out! Complete your purchase now!"
          },
          "position": {
            "x": 3600,
            "y": 300
          }
        },
        {
          "id": "19",
          "label": "Log Touchpoint (WhatsApp)",
          "nodeType": "n8n-nodes-base.googleSheets",
          "typeVersion": 1,
          "params": {
            "operation": "append",
            "sheetId": "your-google-sheet-id",
            "range": "Touchpoints!A:F",
            "data": [
              [
                "{{$json[\"cart_id\"]}}",
                "{{$json[\"customer_id\"]}}",
                "WhatsApp",
                "{{$now}}",
                "WhatsApp",
                "{{$json[\"ab_group\"]}}"
              ]
            ]
          },
          "position": {
            "x": 3800,
            "y": 300
          }
        },
        {
          "id": "20",
          "label": "Add to Facebook Custom Audience",
          "nodeType": "n8n-nodes-base.httpRequest",
          "typeVersion": 1,
          "params": {
            "url": "https://graph.facebook.com/v11.0/act_<AD_ACCOUNT_ID>/customaudiences",
            "method": "POST",
            "authentication": "facebookApi",
            "body": {
              "payload": {
                "schema": "EMAIL_SHA256",
                "data": [
                  "{{$json[\"customer_email_hash\"]}}"
                ]
              }
            }
          },
          "position": {
            "x": 4000,
            "y": 300
          }
        },
        {
          "id": "21",
          "label": "Check Cart Value Threshold",
          "nodeType": "n8n-nodes-base.if",
          "typeVersion": 1,
          "params": {
            "conditions": {
              "number": [
                {
                  "value1": "{{$json[\"cart_value\"]}}",
                  "operation": "greaterThan",
                  "value2": "100"
                }
              ]
            }
          },
          "position": {
            "x": 4200,
            "y": 300
          }
        },
        {
          "id": "22",
          "label": "Notify High-Value Recovery",
          "nodeType": "n8n-nodes-base.slack",
          "typeVersion": 1,
          "params": {
            "channel": "#sales",
            "text": "High-value cart recovered: {{$json[\"cart_value\"]}}"
          },
          "position": {
            "x": 4400,
            "y": 300
          }
        }
      ],
      "connections": [
        {
          "from": "1",
          "to": "2"
        },
        {
          "from": "2",
          "to": "3"
        },
        {
          "from": "3",
          "to": "4"
        },
        {
          "from": "4",
          "to": "5"
        },
        {
          "from": "5",
          "to": "6"
        },
        {
          "from": "6",
          "to": "7"
        },
        {
          "from": "7",
          "to": "8"
        },
        {
          "from": "8",
          "to": "9",
          "outputIndex": 1
        },
        {
          "from": "9",
          "to": "10"
        },
        {
          "from": "10",
          "to": "11"
        },
        {
          "from": "11",
          "to": "12"
        },
        {
          "from": "12",
          "to": "13"
        },
        {
          "from": "13",
          "to": "14"
        },
        {
          "from": "14",
          "to": "15"
        },
        {
          "from": "15",
          "to": "16"
        },
        {
          "from": "16",
          "to": "17"
        },
        {
          "from": "17",
          "to": "18"
        },
        {
          "from": "18",
          "to": "19"
        },
        {
          "from": "19",
          "to": "20"
        },
        {
          "from": "20",
          "to": "21"
        },
        {
          "from": "21",
          "to": "22",
          "outputIndex": 1
        }
      ]
    }
  },
  "usage": {
    "prompt_tokens": 1705,
    "completion_tokens": 2960,
    "total_tokens": 4665
  },
  "error": null,
  "generated_at": "2026-01-11T17:01:48.330550"
}